function Psychrometrics(){var t=Math.log,e=Math.exp,i=Math.pow,r=Math.min,n=Math.max,o=Math.abs,s=void 0,a=void 0;this.IP=1,this.SI=2,this.SetUnitSystem=function(t){if(t!=this.IP&&t!=this.SI)throw new Error("UnitSystem must be IP or SI");a=(s=t)==this.IP?.001*9/5:.001},this.GetUnitSystem=function(){return s},this.isIP=function(){if(s==this.IP)return!0;if(s==this.SI)return!1;throw new Error("Unit system is not defined")},this.GetTRankineFromTFahrenheit=function(t){return t+459.67},this.GetTFahrenheitFromTRankine=function(t){return t-459.67},this.GetTKelvinFromTCelsius=function(t){return t+273.15},this.GetTCelsiusFromTKelvin=function(t){return t-273.15},this.GetTWetBulbFromTDewPoint=function(t,e,i){var r;if(!(e<=t))throw new Error("Dew point temperature is above dry bulb temperature");return r=this.GetHumRatioFromTDewPoint(e,i),this.GetTWetBulbFromHumRatio(t,r,i)},this.GetTWetBulbFromRelHum=function(t,e,i){var r;if(!(e>=0&&e<=1))throw new Error("Relative humidity is outside range [0,1]");return r=this.GetHumRatioFromRelHum(t,e,i),this.GetTWetBulbFromHumRatio(t,r,i)},this.GetRelHumFromTDewPoint=function(t,e){if(!(e<=t))throw new Error("Dew point temperature is above dry bulb temperature");return this.GetSatVapPres(e)/this.GetSatVapPres(t)},this.GetRelHumFromTWetBulb=function(t,e,i){var r;if(!(e<=t))throw new Error("Wet bulb temperature is above dry bulb temperature");return r=this.GetHumRatioFromTWetBulb(t,e,i),this.GetRelHumFromHumRatio(t,r,i)},this.GetTDewPointFromRelHum=function(t,e){var i;if(!(e>=0&&e<=1))throw new Error("Relative humidity is outside range [0,1]");return i=this.GetVapPresFromRelHum(t,e),this.GetTDewPointFromVapPres(t,i)},this.GetTDewPointFromTWetBulb=function(t,e,i){var r;if(!(e<=t))throw new Error("Wet bulb temperature is above dry bulb temperature");return r=this.GetHumRatioFromTWetBulb(t,e,i),this.GetTDewPointFromHumRatio(t,r,i)},this.GetVapPresFromRelHum=function(t,e){if(!(e>=0&&e<=1))throw new Error("Relative humidity is outside range [0,1]");return e*this.GetSatVapPres(t)},this.GetRelHumFromVapPres=function(t,e){if(!(e>=0))throw new Error("Partial pressure of water vapor in moist air is negative");return e/this.GetSatVapPres(t)},this.dLnPws_=function(t){var e,r;return this.isIP()?(r=this.GetTRankineFromTFahrenheit(t),e=t<=32.018?10214.165/i(r,2)-.0053765794+3.8404754e-7*r+1.06727496e-9*i(r,2)-3.61378752e-13*i(r,3)+4.1635019/r:10440.397/i(r,2)-.027022355+2578072e-11*r-7.4342043e-9*i(r,2)+6.5459673/r):(r=this.GetTKelvinFromTCelsius(t),e=t<=.01?5674.5359/i(r,2)-.009677843+124431402e-14*r+6.2243475e-9*i(r,2)-3.7936096e-12*i(r,3)+4.1635019/r:5800.2206/i(r,2)-.048640239+83529536e-12*r-4.3356279e-8*i(r,2)+6.5459673/r),e},this.GetTDewPointFromVapPres=function(e,i){var s;if(s=this.isIP()?[-148,392]:[-100,200],i<this.GetSatVapPres(s[0])||i>this.GetSatVapPres(s[1]))throw new Error("Partial pressure of water vapor is outside range of validity of equations");var u,h,m=e,l=t(i),c=1;do{u=m,h=t(this.GetSatVapPres(u));var f=this.dLnPws_(u);if(m=n(m=u-(h-l)/f,s[0]),m=r(m,s[1]),c>100)throw new Error("Convergence not reached in GetTDewPointFromVapPres. Stopping.");c++}while(o(m-u)>a);return r(m,e)},this.GetVapPresFromTDewPoint=function(t){return this.GetSatVapPres(t)},this.GetTWetBulbFromHumRatio=function(t,e,i){var r,o,s,u,h=1;if(!(e>=0))throw new Error("Humidity ratio is negative");for(u=n(e,1e-7),r=((s=this.GetTDewPointFromHumRatio(t,u,i))+(o=t))/2;o-s>a;){if(this.GetHumRatioFromTWetBulb(t,r,i)>u?o=r:s=r,r=(o+s)/2,h>100)throw new Error("Convergence not reached in GetTWetBulbFromHumRatio. Stopping.");h++}return r},this.GetHumRatioFromTWetBulb=function(t,e,i){var r,o=-99999;if(!(e<=t))throw new Error("Wet bulb temperature is above dry bulb temperature");return r=this.GetSatHumRatio(e,i),o=this.isIP()?e>=32?((1093-.556*e)*r-.24*(t-e))/(1093+.444*t-e):((1220-.04*e)*r-.24*(t-e))/(1220+.444*t-.48*e):e>=0?((2501-2.326*e)*r-1.006*(t-e))/(2501+1.86*t-4.186*e):((2830-.24*e)*r-1.006*(t-e))/(2830+1.86*t-2.1*e),n(o,1e-7)},this.GetHumRatioFromRelHum=function(t,e,i){var r;if(!(e>=0&&e<=1))throw new Error("Relative humidity is outside range [0,1]");return r=this.GetVapPresFromRelHum(t,e),this.GetHumRatioFromVapPres(r,i)},this.GetRelHumFromHumRatio=function(t,e,i){var r;if(!(e>=0))throw new Error("Humidity ratio is negative");return r=this.GetVapPresFromHumRatio(e,i),this.GetRelHumFromVapPres(t,r)},this.GetHumRatioFromTDewPoint=function(t,e){var i;return i=this.GetSatVapPres(t),this.GetHumRatioFromVapPres(i,e)},this.GetTDewPointFromHumRatio=function(t,e,i){var r;if(!(e>=0))throw new Error("Humidity ratio is negative");return r=this.GetVapPresFromHumRatio(e,i),this.GetTDewPointFromVapPres(t,r)},this.GetHumRatioFromVapPres=function(t,e){if(!(t>=0))throw new Error("Partial pressure of water vapor in moist air is negative");return n(.621945*t/(e-t),1e-7)},this.GetVapPresFromHumRatio=function(t,e){var i;if(!(t>=0))throw new Error("Humidity ratio is negative");return e*(i=n(t,1e-7))/(.621945+i)},this.GetSpecificHumFromHumRatio=function(t){var e;if(!(t>=0))throw new Error("Humidity ratio is negative");return(e=n(t,1e-7))/(1+e)},this.GetHumRatioFromSpecificHum=function(t){if(!(t>=0&&t<1))throw new Error("Specific humidity is outside range [0, 1)");return n(t/(1-t),1e-7)},this.GetDryAirEnthalpy=function(t){return this.isIP()?.24*t:1006*t},this.GetDryAirDensity=function(t,e){return this.isIP()?144*e/53.35/this.GetTRankineFromTFahrenheit(t):e/287.042/this.GetTKelvinFromTCelsius(t)},this.GetDryAirVolume=function(t,e){return this.isIP()?53.35*this.GetTRankineFromTFahrenheit(t)/(144*e):287.042*this.GetTKelvinFromTCelsius(t)/e},this.GetTDryBulbFromEnthalpyAndHumRatio=function(t,e){var i;if(!(e>=0))throw new Error("Humidity ratio is negative");return i=n(e,1e-7),this.isIP()?(t-1061*i)/(.24+.444*i):(t/1e3-2501*i)/(1.006+1.86*i)},this.GetHumRatioFromEnthalpyAndTDryBulb=function(t,e){var i;return i=this.isIP()?(t-.24*e)/(1061+.444*e):(t/1e3-1.006*e)/(2501+1.86*e),n(i,1e-7)},this.GetSatVapPres=function(r){var n,o;if(this.isIP()){if(!(r>=-148&&r<=392))throw new Error("Dry bulb temperature is outside range [-148, 392]");o=this.GetTRankineFromTFahrenheit(r),n=r<=32.018?-10214.165/o-4.8932428-.0053765794*o+1.9202377e-7*o*o+3.5575832e-10*i(o,3)-9.0344688e-14*i(o,4)+4.1635019*t(o):-10440.397/o-11.29465-.027022355*o+1289036e-11*o*o-2.4780681e-9*i(o,3)+6.5459673*t(o)}else{if(!(r>=-100&&r<=200))throw new Error("Dry bulb temperature is outside range [-100, 200]");o=this.GetTKelvinFromTCelsius(r),n=r<=.01?-5674.5359/o+6.3925247-.009677843*o+6.2215701e-7*o*o+2.0747825e-9*i(o,3)-9.484024e-13*i(o,4)+4.1635019*t(o):-5800.2206/o+1.3914993-.048640239*o+41764768e-12*o*o-1.4452093e-8*i(o,3)+6.5459673*t(o)}return e(n)},this.GetSatHumRatio=function(t,e){var i;return i=this.GetSatVapPres(t),n(.621945*i/(e-i),1e-7)},this.GetSatAirEnthalpy=function(t,e){return this.GetMoistAirEnthalpy(t,this.GetSatHumRatio(t,e))},this.GetVaporPressureDeficit=function(t,e,i){var r;if(!(e>=0))throw new Error("Humidity ratio is negative");return r=this.GetRelHumFromHumRatio(t,e,i),this.GetSatVapPres(t)*(1-r)},this.GetDegreeOfSaturation=function(t,e,i){if(!(e>=0))throw new Error("Humidity ratio is negative");return n(e,1e-7)/this.GetSatHumRatio(t,i)},this.GetMoistAirEnthalpy=function(t,e){var i;if(!(e>=0))throw new Error("Humidity ratio is negative");return i=n(e,1e-7),this.isIP()?.24*t+i*(1061+.444*t):1e3*(1.006*t+i*(2501+1.86*t))},this.GetMoistAirVolume=function(t,e,i){var r;if(!(e>=0))throw new Error("Humidity ratio is negative");return r=n(e,1e-7),this.isIP()?53.35*this.GetTRankineFromTFahrenheit(t)*(1+1.607858*r)/(144*i):287.042*this.GetTKelvinFromTCelsius(t)*(1+1.607858*r)/i},this.GetTDryBulbFromMoistAirVolumeAndHumRatio=function(t,e,i){var r;if(!(e>=0))throw new Error("Humidity ratio is negative");return r=n(e,1e-7),this.isIP()?this.GetTFahrenheitFromTRankine(t*(144*i)/(53.35*(1+1.607858*r))):this.GetTCelsiusFromTKelvin(t*i/(287.042*(1+1.607858*r)))},this.GetMoistAirDensity=function(t,e,i){var r;if(!(e>=0))throw new Error("Humidity ratio is negative");return(1+(r=n(e,1e-7)))/this.GetMoistAirVolume(t,r,i)},this.GetStandardAtmPressure=function(t){return this.isIP()?14.696*i(1-68754e-10*t,5.2559):101325*i(1-225577e-10*t,5.2559)},this.GetStandardAtmTemperature=function(t){return this.isIP()?59-.0035662*t:15-.0065*t},this.GetSeaLevelPressure=function(t,i,r){var n,o;return this.isIP()?(n=r+.0036*i/2,o=53.351*this.GetTRankineFromTFahrenheit(n)):(n=r+.0065*i/2,o=287.055*this.GetTKelvinFromTCelsius(n)/9.807),t*e(i/o)},this.GetStationPressure=function(t,e,i){return t/this.GetSeaLevelPressure(1,e,i)},this.CalcPsychrometricsFromTWetBulb=function(t,e,i){var r=this.GetHumRatioFromTWetBulb(t,e,i);return[r,this.GetTDewPointFromHumRatio(t,r,i),this.GetRelHumFromHumRatio(t,r,i),this.GetVapPresFromHumRatio(r,i),this.GetMoistAirEnthalpy(t,r),this.GetMoistAirVolume(t,r,i),this.GetDegreeOfSaturation(t,r,i)]},this.CalcPsychrometricsFromTDewPoint=function(t,e,i){var r=this.GetHumRatioFromTDewPoint(e,i);return[r,this.GetTWetBulbFromHumRatio(t,r,i),this.GetRelHumFromHumRatio(t,r,i),this.GetVapPresFromHumRatio(r,i),this.GetMoistAirEnthalpy(t,r),this.GetMoistAirVolume(t,r,i),this.GetDegreeOfSaturation(t,r,i)]},this.CalcPsychrometricsFromRelHum=function(t,e,i){var r=this.GetHumRatioFromRelHum(t,e,i);return[r,this.GetTWetBulbFromHumRatio(t,r,i),this.GetTDewPointFromHumRatio(t,r,i),this.GetVapPresFromHumRatio(r,i),this.GetMoistAirEnthalpy(t,r),this.GetMoistAirVolume(t,r,i),this.GetDegreeOfSaturation(t,r,i)]}}!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.psychrolib=e()}("undefined"!=typeof self?self:this,function(){return new Psychrometrics});export function Psychart(t,e,i,r,n,o,s,a,u){const h="http://www.w3.org/2000/svg",m=.5,l=document.createElementNS(h,"svg"),c=new Psychrometrics;c.SetUnitSystem(i?c.SI:c.IP);const f=c.GetStandardAtmPressure(s),d=c.GetHumRatioFromTDewPoint(o,f),p=12,b="Â°"+(c.isIP()?"F":"C"),w={NW:0,N:1,NE:2,E:3,SE:4,S:5,SW:6,W:7,C:8};let G=void 0,P=void 0;l.setAttribute("viewBox","0 0 "+t+" "+e);const y=()=>l.dispatchEvent(new Event("updatePsychart")),v=()=>x(B),F=(t,e,i,r,n)=>((t,e,i)=>t*(i-e)+e)(((t,e,i)=>(t-e)/(i-e))(t,e,i),r,n),R=(t,e,i)=>t-e<i&&e-t<i,H=(t,e=0)=>Math.round(t*10**e)/10**e,T=(i,o)=>new N(F(i,r,n,30,t-30),e-F(E(i,o).hr,0,d,30,e-30)),A=(i,o)=>new N(F(i,r,n,30,t-30),e-F(g(i,o).hr,0,d,30,e-30)),S=(i,o)=>new N(F(i,r,n,30,t-30),e-F(D(i,o).hr,0,d,30,e-30)),E=(t,e)=>{const i=c.CalcPsychrometricsFromRelHum(t,e,f);return new M(t,e,i[1],i[2],i[0])},g=(t,e)=>{const i=c.CalcPsychrometricsFromTWetBulb(t,e,f);return new M(t,i[2],e,i[1],i[0])},D=(t,e)=>{const i=c.CalcPsychrometricsFromTDewPoint(t,e,f);return new M(t,i[2],i[1],e,i[0])},x=t=>{let e;for(;e=t.firstChild;)t.removeChild(e)},V=document.createElementNS(h,"g");l.appendChild(V);const C=document.createElementNS(h,"g");l.appendChild(C);const I=document.createElementNS(h,"g");l.appendChild(I);const k=document.createElementNS(h,"g");l.appendChild(k);const W=document.createElementNS(h,"g");l.appendChild(W);const B=document.createElementNS(h,"g");l.appendChild(B);for(let t=r;t<=n;t+=10){const e=new K(1);e.addPoint(T(t,0));let i=S(t,t);i.y<30&&(i=new N(i.x,30)),e.addPoint(i),U(T(t,0),w.N,t+b,!0,"Dry Bulb")}for(let t=0;t<=o;t+=10){const e=new K(1);let i=S(t,t);i.x<30&&(i=new N(30,i.y)),e.addPoint(i),e.addPoint(S(n,t)),U(S(n,t),w.W,t+b,!0,"Dew Point")}for(let t=r;t<n;t+=10){const e=new K(1);for(let i=t;i<=n;i+=m)e.addPoint(A(i,t));U(S(t,t),w.SE,t+b,!0,"Wet Bulb")}for(let t=0;t<=100;t+=10){const e=new K(1);let i=!0;for(let o=r;o<=n;o+=m){let r=T(o,t/100);if(r.y<30){r=new N(r.x,30),e.addPoint(r),U(r,w.S,0===t||100===t?"":t+"%",!0,"Relative Humidity"),i=!1;break}e.addPoint(r)}i&&U(T(n,t/100),w.NE,0===t||100===t?"":t+"%",!0,"Relative Humidity")}function N(t,e){this.x=t,this.y=e}function M(t,e,i,r,n){this.db=t,this.rh=e,this.wb=i,this.dp=r,this.hr=n}function K(t){const e=document.createElementNS(h,"path");e.setAttribute("fill","none"),e.setAttribute("stroke",a),e.setAttribute("stroke-width",t+"px"),e.setAttribute("vector-effect","non-scaling-stroke"),C.appendChild(e);let i="M";this.addPoint=(t=>{if(!(t instanceof N))throw"Incorrect parameter types for Line.addPoint(Point).";i+=" "+t.x+","+t.y,e.setAttribute("d",i)})}function L(t,e,i,r,n){if(!(e instanceof M))throw"Incorrect parameter types in PlotPoint.";const o=S(e.db,e.dp);if(n>0&&P instanceof N){const t=document.createElementNS(h,"path");t.setAttribute("fill","none"),t.setAttribute("stroke",r),t.setAttribute("stroke-width",n+"px"),t.setAttribute("stroke-linecap","round"),t.setAttribute("vector-effect","non-scaling-stroke"),t.setAttribute("d","M "+P.x+","+P.y+" "+o.x+","+o.y),k.appendChild(t)}P=o;const s=document.createElementNS(h,"path");s.setAttribute("fill","none"),s.setAttribute("stroke",r),s.setAttribute("stroke-width",i+"px"),s.setAttribute("stroke-linecap","round"),s.setAttribute("vector-effect","non-scaling-stroke"),s.setAttribute("d","M "+o.x+","+o.y+" h 0"),W.appendChild(s);const a=(t?t+"\n":"")+H(e.db,1)+b+" Dry Bulb\n"+H(100*e.rh)+"% Rel. Hum.\n"+H(e.wb,1)+b+" Wet Bulb\n"+H(e.dp,1)+b+" Dew Point";s.onmouseover=(()=>z(o.x,o.y,r,a,!0)),s.onmouseleave=(()=>v()),y()}function O(t,e){let i="M",r=void 0,n=void 0;const o=t=>{if(!(t instanceof N))throw"Incorrect parameter types for Region.addPoint(Point).";i+=" "+t.x+","+t.y};this.nextPsy=(t=>{if(!(t instanceof M))throw"Incorrect parameter types for Region.nextPsy(Psy).";if(n instanceof M){const e=.001;if(R(t.rh,n.rh,e))if(n.db<t.db)for(let i=n.db;i<=t.db+e;i+=m)o(T(i,n.rh));else for(let i=n.db;i>=t.db-e;i-=m)o(T(i,n.rh));else o(S(t.db,t.dp))}else r=t,o(S(t.db,t.dp));n=t}),this.build=(()=>{if(r instanceof M){this.nextPsy(r);const n=document.createElementNS(h,"path");if(n.setAttribute("fill",e),n.setAttribute("stroke","none"),n.setAttribute("d",i+" z"),V.appendChild(n),t){let i=S(r.db,r.dp);n.onmouseover=(()=>z(i.x,i.y,e,t,!0)),n.onmouseleave=v}y()}}),this.clearAll=(()=>{x(V),y()})}function U(t,e,i,r,n=""){if(!(t instanceof N))throw"Incorrect parameter types in Label.";const o=document.createElementNS(h,"text");o.setAttribute("fill",u),o.setAttribute("x",t.x),o.setAttribute("y",t.y),o.setAttribute("font-family","sans-serif"),o.setAttribute("font-size",p+"px"),o.setAttribute("text-anchor","middle"),o.setAttribute("dominant-baseline","middle"),o.textContent=i,n&&(o.onmouseover=(()=>z(t.x,t.y,"#888",n,!0)),o.onmouseleave=v),r&&I.appendChild(o);const s=()=>{o.setAttribute("y",t.y+p/2),o.setAttribute("dominant-baseline","hanging")},a=()=>{o.setAttribute("y",t.y-p/2),o.setAttribute("dominant-baseline","alphabetic")},m=()=>{o.setAttribute("x",t.x+p/2),o.setAttribute("text-anchor","start")},l=()=>{o.setAttribute("x",t.x-p/2),o.setAttribute("text-anchor","end")};switch(e){case w.NW:s(),m();break;case w.N:s();break;case w.NE:s(),l();break;case w.E:l();break;case w.SE:a(),l();break;case w.S:a();break;case w.SW:a(),m();break;case w.W:m();break;case w.C:break;default:throw"Incorrect Anchor type ("+e+"). Expected "+JSON.stringify(w)}return o}function z(i,r,n,o,s){s&&v();const u=document.createElementNS(h,"g"),m=document.createElementNS(h,"rect"),l=[],c=o.split("\n");for(let t in c)l.push(U(new N(0,t*p),w.NW,c[t],!1,""));B.appendChild(u),u.appendChild(m);let f,d=0,b=p*c.length+10;for(let t in l)u.appendChild(l[t]),(f=l[t].getBBox().width+10)>d&&(d=f);m.setAttribute("stroke",a),m.setAttribute("fill",n),m.setAttribute("x",0),m.setAttribute("y",0),m.setAttribute("width",d),m.setAttribute("height",b),m.setAttribute("rx",2),m.setAttribute("stroke-width","1px"),i+d+10>t?i-=d+10:i+=10,r+b+10>e?r-=b+10:r+=10,u.setAttribute("transform","translate("+i+","+r+")")}this.plotDbRh=((t,e,i="",r="#f00",n=5,o=0)=>L(i,E(t,e),n,r,o)),this.plotDbWb=((t,e,i="",r="#f00",n=5,o=0)=>L(i,g(t,e),n,r,o)),this.plotDbDp=((t,e,i="",r="#f00",n=5,o=0)=>L(i,D(t,e),n,r,o)),this.newRegion=((t="",e="#00f")=>!(G instanceof O)&&(G=new O(t,e))),this.regionDbRh=((t,e)=>G instanceof O&&G.nextPsy(E(t,e))),this.regionDbWb=((t,e)=>G instanceof O&&G.nextPsy(g(t,e))),this.regionDbDp=((t,e)=>G instanceof O&&G.nextPsy(D(t,e))),this.buildRegion=(()=>{G instanceof O&&(G.build(),G=void 0)}),this.clearRegions=(()=>!(G instanceof O)&&new O("").clearAll()),this.clearData=(()=>{x(W),x(k),P=void 0,y()}),this.el=(()=>l)}