function Psychrometrics(){var t=Math.log,e=Math.exp,i=Math.pow,r=Math.min,n=Math.max,o=Math.abs,s=void 0,a=void 0;this.IP=1,this.SI=2,this.SetUnitSystem=function(t){if(t!=this.IP&&t!=this.SI)throw new Error("UnitSystem must be IP or SI");a=(s=t)==this.IP?.001*9/5:.001},this.GetUnitSystem=function(){return s},this.isIP=function(){if(s==this.IP)return!0;if(s==this.SI)return!1;throw new Error("Unit system is not defined")},this.GetTRankineFromTFahrenheit=function(t){return t+459.67},this.GetTFahrenheitFromTRankine=function(t){return t-459.67},this.GetTKelvinFromTCelsius=function(t){return t+273.15},this.GetTCelsiusFromTKelvin=function(t){return t-273.15},this.GetTWetBulbFromTDewPoint=function(t,e,i){var r;if(!(e<=t))throw new Error("Dew point temperature is above dry bulb temperature");return r=this.GetHumRatioFromTDewPoint(e,i),this.GetTWetBulbFromHumRatio(t,r,i)},this.GetTWetBulbFromRelHum=function(t,e,i){var r;if(!(e>=0&&e<=1))throw new Error("Relative humidity is outside range [0,1]");return r=this.GetHumRatioFromRelHum(t,e,i),this.GetTWetBulbFromHumRatio(t,r,i)},this.GetRelHumFromTDewPoint=function(t,e){if(!(e<=t))throw new Error("Dew point temperature is above dry bulb temperature");return this.GetSatVapPres(e)/this.GetSatVapPres(t)},this.GetRelHumFromTWetBulb=function(t,e,i){var r;if(!(e<=t))throw new Error("Wet bulb temperature is above dry bulb temperature");return r=this.GetHumRatioFromTWetBulb(t,e,i),this.GetRelHumFromHumRatio(t,r,i)},this.GetTDewPointFromRelHum=function(t,e){var i;if(!(e>=0&&e<=1))throw new Error("Relative humidity is outside range [0,1]");return i=this.GetVapPresFromRelHum(t,e),this.GetTDewPointFromVapPres(t,i)},this.GetTDewPointFromTWetBulb=function(t,e,i){var r;if(!(e<=t))throw new Error("Wet bulb temperature is above dry bulb temperature");return r=this.GetHumRatioFromTWetBulb(t,e,i),this.GetTDewPointFromHumRatio(t,r,i)},this.GetVapPresFromRelHum=function(t,e){if(!(e>=0&&e<=1))throw new Error("Relative humidity is outside range [0,1]");return e*this.GetSatVapPres(t)},this.GetRelHumFromVapPres=function(t,e){if(!(e>=0))throw new Error("Partial pressure of water vapor in moist air is negative");return e/this.GetSatVapPres(t)},this.dLnPws_=function(t){var e,r;return this.isIP()?(r=this.GetTRankineFromTFahrenheit(t),e=t<=32.018?10214.165/i(r,2)-.0053765794+3.8404754e-7*r+1.06727496e-9*i(r,2)-3.61378752e-13*i(r,3)+4.1635019/r:10440.397/i(r,2)-.027022355+2578072e-11*r-7.4342043e-9*i(r,2)+6.5459673/r):(r=this.GetTKelvinFromTCelsius(t),e=t<=.01?5674.5359/i(r,2)-.009677843+124431402e-14*r+6.2243475e-9*i(r,2)-3.7936096e-12*i(r,3)+4.1635019/r:5800.2206/i(r,2)-.048640239+83529536e-12*r-4.3356279e-8*i(r,2)+6.5459673/r),e},this.GetTDewPointFromVapPres=function(e,i){var s;if(s=this.isIP()?[-148,392]:[-100,200],i<this.GetSatVapPres(s[0])||i>this.GetSatVapPres(s[1]))throw new Error("Partial pressure of water vapor is outside range of validity of equations");var u,h,m=e,c=t(i),l=1;do{u=m,h=t(this.GetSatVapPres(u));var f=this.dLnPws_(u);if(m=n(m=u-(h-c)/f,s[0]),m=r(m,s[1]),l>100)throw new Error("Convergence not reached in GetTDewPointFromVapPres. Stopping.");l++}while(o(m-u)>a);return r(m,e)},this.GetVapPresFromTDewPoint=function(t){return this.GetSatVapPres(t)},this.GetTWetBulbFromHumRatio=function(t,e,i){var r,o,s,u,h=1;if(!(e>=0))throw new Error("Humidity ratio is negative");for(u=n(e,1e-7),r=((s=this.GetTDewPointFromHumRatio(t,u,i))+(o=t))/2;o-s>a;){if(this.GetHumRatioFromTWetBulb(t,r,i)>u?o=r:s=r,r=(o+s)/2,h>100)throw new Error("Convergence not reached in GetTWetBulbFromHumRatio. Stopping.");h++}return r},this.GetHumRatioFromTWetBulb=function(t,e,i){var r,o=-99999;if(!(e<=t))throw new Error("Wet bulb temperature is above dry bulb temperature");return r=this.GetSatHumRatio(e,i),o=this.isIP()?e>=32?((1093-.556*e)*r-.24*(t-e))/(1093+.444*t-e):((1220-.04*e)*r-.24*(t-e))/(1220+.444*t-.48*e):e>=0?((2501-2.326*e)*r-1.006*(t-e))/(2501+1.86*t-4.186*e):((2830-.24*e)*r-1.006*(t-e))/(2830+1.86*t-2.1*e),n(o,1e-7)},this.GetHumRatioFromRelHum=function(t,e,i){var r;if(!(e>=0&&e<=1))throw new Error("Relative humidity is outside range [0,1]");return r=this.GetVapPresFromRelHum(t,e),this.GetHumRatioFromVapPres(r,i)},this.GetRelHumFromHumRatio=function(t,e,i){var r;if(!(e>=0))throw new Error("Humidity ratio is negative");return r=this.GetVapPresFromHumRatio(e,i),this.GetRelHumFromVapPres(t,r)},this.GetHumRatioFromTDewPoint=function(t,e){var i;return i=this.GetSatVapPres(t),this.GetHumRatioFromVapPres(i,e)},this.GetTDewPointFromHumRatio=function(t,e,i){var r;if(!(e>=0))throw new Error("Humidity ratio is negative");return r=this.GetVapPresFromHumRatio(e,i),this.GetTDewPointFromVapPres(t,r)},this.GetHumRatioFromVapPres=function(t,e){if(!(t>=0))throw new Error("Partial pressure of water vapor in moist air is negative");return n(.621945*t/(e-t),1e-7)},this.GetVapPresFromHumRatio=function(t,e){var i;if(!(t>=0))throw new Error("Humidity ratio is negative");return e*(i=n(t,1e-7))/(.621945+i)},this.GetSpecificHumFromHumRatio=function(t){var e;if(!(t>=0))throw new Error("Humidity ratio is negative");return(e=n(t,1e-7))/(1+e)},this.GetHumRatioFromSpecificHum=function(t){if(!(t>=0&&t<1))throw new Error("Specific humidity is outside range [0, 1)");return n(t/(1-t),1e-7)},this.GetDryAirEnthalpy=function(t){return this.isIP()?.24*t:1006*t},this.GetDryAirDensity=function(t,e){return this.isIP()?144*e/53.35/this.GetTRankineFromTFahrenheit(t):e/287.042/this.GetTKelvinFromTCelsius(t)},this.GetDryAirVolume=function(t,e){return this.isIP()?53.35*this.GetTRankineFromTFahrenheit(t)/(144*e):287.042*this.GetTKelvinFromTCelsius(t)/e},this.GetTDryBulbFromEnthalpyAndHumRatio=function(t,e){var i;if(!(e>=0))throw new Error("Humidity ratio is negative");return i=n(e,1e-7),this.isIP()?(t-1061*i)/(.24+.444*i):(t/1e3-2501*i)/(1.006+1.86*i)},this.GetHumRatioFromEnthalpyAndTDryBulb=function(t,e){var i;return i=this.isIP()?(t-.24*e)/(1061+.444*e):(t/1e3-1.006*e)/(2501+1.86*e),n(i,1e-7)},this.GetSatVapPres=function(r){var n,o;if(this.isIP()){if(!(r>=-148&&r<=392))throw new Error("Dry bulb temperature is outside range [-148, 392]");o=this.GetTRankineFromTFahrenheit(r),n=r<=32.018?-10214.165/o-4.8932428-.0053765794*o+1.9202377e-7*o*o+3.5575832e-10*i(o,3)-9.0344688e-14*i(o,4)+4.1635019*t(o):-10440.397/o-11.29465-.027022355*o+1289036e-11*o*o-2.4780681e-9*i(o,3)+6.5459673*t(o)}else{if(!(r>=-100&&r<=200))throw new Error("Dry bulb temperature is outside range [-100, 200]");o=this.GetTKelvinFromTCelsius(r),n=r<=.01?-5674.5359/o+6.3925247-.009677843*o+6.2215701e-7*o*o+2.0747825e-9*i(o,3)-9.484024e-13*i(o,4)+4.1635019*t(o):-5800.2206/o+1.3914993-.048640239*o+41764768e-12*o*o-1.4452093e-8*i(o,3)+6.5459673*t(o)}return e(n)},this.GetSatHumRatio=function(t,e){var i;return i=this.GetSatVapPres(t),n(.621945*i/(e-i),1e-7)},this.GetSatAirEnthalpy=function(t,e){return this.GetMoistAirEnthalpy(t,this.GetSatHumRatio(t,e))},this.GetVaporPressureDeficit=function(t,e,i){var r;if(!(e>=0))throw new Error("Humidity ratio is negative");return r=this.GetRelHumFromHumRatio(t,e,i),this.GetSatVapPres(t)*(1-r)},this.GetDegreeOfSaturation=function(t,e,i){if(!(e>=0))throw new Error("Humidity ratio is negative");return n(e,1e-7)/this.GetSatHumRatio(t,i)},this.GetMoistAirEnthalpy=function(t,e){var i;if(!(e>=0))throw new Error("Humidity ratio is negative");return i=n(e,1e-7),this.isIP()?.24*t+i*(1061+.444*t):1e3*(1.006*t+i*(2501+1.86*t))},this.GetMoistAirVolume=function(t,e,i){var r;if(!(e>=0))throw new Error("Humidity ratio is negative");return r=n(e,1e-7),this.isIP()?53.35*this.GetTRankineFromTFahrenheit(t)*(1+1.607858*r)/(144*i):287.042*this.GetTKelvinFromTCelsius(t)*(1+1.607858*r)/i},this.GetTDryBulbFromMoistAirVolumeAndHumRatio=function(t,e,i){var r;if(!(e>=0))throw new Error("Humidity ratio is negative");return r=n(e,1e-7),this.isIP()?this.GetTFahrenheitFromTRankine(t*(144*i)/(53.35*(1+1.607858*r))):this.GetTCelsiusFromTKelvin(t*i/(287.042*(1+1.607858*r)))},this.GetMoistAirDensity=function(t,e,i){var r;if(!(e>=0))throw new Error("Humidity ratio is negative");return(1+(r=n(e,1e-7)))/this.GetMoistAirVolume(t,r,i)},this.GetStandardAtmPressure=function(t){return this.isIP()?14.696*i(1-68754e-10*t,5.2559):101325*i(1-225577e-10*t,5.2559)},this.GetStandardAtmTemperature=function(t){return this.isIP()?59-.0035662*t:15-.0065*t},this.GetSeaLevelPressure=function(t,i,r){var n,o;return this.isIP()?(n=r+.0036*i/2,o=53.351*this.GetTRankineFromTFahrenheit(n)):(n=r+.0065*i/2,o=287.055*this.GetTKelvinFromTCelsius(n)/9.807),t*e(i/o)},this.GetStationPressure=function(t,e,i){return t/this.GetSeaLevelPressure(1,e,i)},this.CalcPsychrometricsFromTWetBulb=function(t,e,i){var r=this.GetHumRatioFromTWetBulb(t,e,i);return[r,this.GetTDewPointFromHumRatio(t,r,i),this.GetRelHumFromHumRatio(t,r,i),this.GetVapPresFromHumRatio(r,i),this.GetMoistAirEnthalpy(t,r),this.GetMoistAirVolume(t,r,i),this.GetDegreeOfSaturation(t,r,i)]},this.CalcPsychrometricsFromTDewPoint=function(t,e,i){var r=this.GetHumRatioFromTDewPoint(e,i);return[r,this.GetTWetBulbFromHumRatio(t,r,i),this.GetRelHumFromHumRatio(t,r,i),this.GetVapPresFromHumRatio(r,i),this.GetMoistAirEnthalpy(t,r),this.GetMoistAirVolume(t,r,i),this.GetDegreeOfSaturation(t,r,i)]},this.CalcPsychrometricsFromRelHum=function(t,e,i){var r=this.GetHumRatioFromRelHum(t,e,i);return[r,this.GetTWetBulbFromHumRatio(t,r,i),this.GetTDewPointFromHumRatio(t,r,i),this.GetVapPresFromHumRatio(r,i),this.GetMoistAirEnthalpy(t,r),this.GetMoistAirVolume(t,r,i),this.GetDegreeOfSaturation(t,r,i)]}}!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.psychrolib=e()}("undefined"!=typeof self?self:this,function(){return new Psychrometrics});export function Psychart(t,e,i,r,n,o,s,a){const u="http://www.w3.org/2000/svg",h=.5,m=document.createElementNS(u,"svg"),c=new Psychrometrics;c.SetUnitSystem(i);const l=c.GetStandardAtmPressure(0),f=c.GetHumRatioFromTDewPoint(o,l),d="Â°"+(c.isIP()?"F":"C"),b={NW:0,N:1,NE:2,E:3,SE:4,S:5,SW:6,W:7,C:8};let w=void 0;m.setAttribute("viewBox","0 0 "+t+" "+e);const p=(t,e,i,r,n)=>((t,e,i)=>t*(i-e)+e)(((t,e,i)=>(t-e)/(i-e))(t,e,i),r,n),G=(t,e,i)=>t-e<i&&e-t<i,P=(t,e=0)=>Math.round(t*10**e)/10**e,y=(i,o)=>new D(p(i,r,n,30,t-30),e-p(R(i,o).hr,0,f,30,e-30)),F=(i,o)=>new D(p(i,r,n,30,t-30),e-p(H(i,o).hr,0,f,30,e-30)),v=(i,o)=>new D(p(i,r,n,30,t-30),e-p(T(i,o).hr,0,f,30,e-30)),R=(t,e)=>{const i=c.CalcPsychrometricsFromRelHum(t,e,l);return new x(t,e,i[1],i[2],i[0])},H=(t,e)=>{const i=c.CalcPsychrometricsFromTWetBulb(t,e,l);return new x(t,i[2],e,i[1],i[0])},T=(t,e)=>{const i=c.CalcPsychrometricsFromTDewPoint(t,e,l);return new x(t,i[2],i[1],e,i[0])},A=document.createElementNS(u,"g");m.appendChild(A);const S=document.createElementNS(u,"g");m.appendChild(S);const E=document.createElementNS(u,"g");m.appendChild(E);const g=document.createElementNS(u,"g");m.appendChild(g);for(let t=r;t<=n;t+=10){const e=new V(1);e.addPoint(y(t,0));let i=v(t,t);i.y<30&&(i=new D(i.x,30)),e.addPoint(i),I(y(t,0),b.N,t+d,!0)}for(let t=0;t<=o;t+=10){const e=new V(1);let i=v(t,t);i.x<30&&(i=new D(30,i.y)),e.addPoint(i),e.addPoint(v(n,t)),I(v(n,t),b.W,t+d,!0)}for(let t=r;t<n;t+=10){const e=new V(1);for(let i=t;i<=n;i+=h)e.addPoint(F(i,t));I(v(t,t),b.SE,t+d,!0)}for(let t=0;t<=100;t+=10){const e=new V(1);let i=!0;for(let o=r;o<=n;o+=h){let r=y(o,t/100);if(r.y<30){r=new D(r.x,30),e.addPoint(r),I(r,b.S,0===t||100===t?"":t+"%",!0),i=!1;break}e.addPoint(r)}i&&I(y(n,t/100),b.NE,0===t||100===t?"":t+"%",!0)}function D(t,e){this.x=t,this.y=e}function x(t,e,i,r,n){this.db=t,this.rh=e,this.wb=i,this.dp=r,this.hr=n}function V(t){const e=document.createElementNS(u,"path");e.setAttribute("fill","none"),e.setAttribute("stroke",s),e.setAttribute("stroke-width",t+"px"),e.setAttribute("vector-effect","non-scaling-stroke"),S.appendChild(e);let i="M";this.addPoint=(t=>{if(!(t instanceof D))throw"Incorrect parameter types for Line.addPoint(Point).";i+=" "+t.x+","+t.y,e.setAttribute("d",i)})}function W(t,e,i,r){if(!(e instanceof x))throw"Incorrect parameter types in PlotPoint.";const n=v(e.db,e.dp),o=document.createElementNS(u,"path");o.setAttribute("fill","none"),o.setAttribute("stroke",r),o.setAttribute("stroke-width",i+"px"),o.setAttribute("stroke-linecap","round"),o.setAttribute("vector-effect","non-scaling-stroke"),o.setAttribute("d","M "+n.x+","+n.y+" h 0"),g.appendChild(o);const a=document.createElementNS(u,"g"),h=document.createElementNS(u,"rect"),m=[I(new D(n.x+10,n.y+10),b.NW,t,!1),I(new D(n.x+10,n.y+10+12),b.NW,P(e.db,1)+d+" Dry Bulb",!1),I(new D(n.x+10,n.y+10+24),b.NW,P(100*e.rh)+"% Rel. Hum.",!1),I(new D(n.x+10,n.y+10+36),b.NW,P(e.wb,1)+d+" Wet Bulb",!1),I(new D(n.x+10,n.y+10+48),b.NW,P(e.dp,1)+d+" Dew Point",!1)];a.setAttribute("visibility","hidden"),g.appendChild(a),h.setAttribute("stroke",s),h.setAttribute("fill",r),h.setAttribute("x",n.x+10),h.setAttribute("y",n.y+10),h.setAttribute("height",70),h.setAttribute("rx",2),h.setAttribute("stroke-width","1px"),a.appendChild(h);let c,l=0;for(let t in m)a.appendChild(m[t]),(c=m[t].getBBox().width+10)>l&&(l=c);h.setAttribute("width",l),o.onmouseover=(()=>a.setAttribute("visibility","visible")),o.onmouseleave=(()=>a.setAttribute("visibility","hidden"))}function C(t){let e="M",i=void 0,r=void 0;const n=t=>{if(!(t instanceof D))throw"Incorrect parameter types for Region.addPoint(Point).";e+=" "+t.x+","+t.y};this.nextPsy=(t=>{if(!(t instanceof x))throw"Incorrect parameter types for Region.nextPsy(Psy).";if(r instanceof x){const e=.001;if(G(t.rh,r.rh,e))if(r.db<t.db)for(let e=r.db;e<t.db;e+=h)n(y(e,r.rh));else for(let e=r.db;e>t.db;e-=h)n(y(e,r.rh));else n(v(t.db,t.dp))}else i=t,n(v(t.db,t.dp));r=t}),this.build=(()=>{this.nextPsy(i);const r=document.createElementNS(u,"path");r.setAttribute("fill",t),r.setAttribute("stroke","none"),r.setAttribute("d",e+" z"),A.appendChild(r)})}function I(t,e,i,r){if(!(t instanceof D))throw"Incorrect parameter types in Label.";const n=document.createElementNS(u,"text");n.setAttribute("fill",a),n.setAttribute("x",t.x),n.setAttribute("y",t.y),n.setAttribute("font-family","sans-serif"),n.setAttribute("font-size","12px"),n.setAttribute("text-anchor","middle"),n.setAttribute("dominant-baseline","middle"),n.textContent=i,r&&E.appendChild(n);const o=()=>{n.setAttribute("y",t.y+6),n.setAttribute("dominant-baseline","hanging")},s=()=>{n.setAttribute("y",t.y-6),n.setAttribute("dominant-baseline","alphabetic")},h=()=>{n.setAttribute("x",t.x+6),n.setAttribute("text-anchor","start")},m=()=>{n.setAttribute("x",t.x-6),n.setAttribute("text-anchor","end")};switch(e){case b.NW:o(),h();break;case b.N:o();break;case b.NE:o(),m();break;case b.E:m();break;case b.SE:s(),m();break;case b.S:s();break;case b.SW:s(),h();break;case b.W:h();break;case b.C:break;default:throw"Incorrect Anchor type ("+e+"). Expected "+JSON.stringify(b)}return n}this.plotDbRh=((t,e,i,r="#f00")=>W(t,R(e,i),5,r)),this.plotDbWb=((t,e,i,r="#f00")=>W(t,H(e,i),5,r)),this.plotDbDp=((t,e,i,r="#f00")=>W(t,T(e,i),5,r)),this.newRegion=(t=>!(w instanceof C)&&(w=new C(t))),this.regionDbRh=((t,e)=>w instanceof C&&w.nextPsy(R(t,e))),this.regionDbWb=((t,e)=>w instanceof C&&w.nextPsy(H(t,e))),this.regionDbDp=((t,e)=>w instanceof C&&w.nextPsy(T(t,e))),this.buildRegion=(()=>{w instanceof C&&(w.build(),w=void 0)}),this.clearRegions=(()=>A.innerHTML=""),this.el=(()=>m)}